<div class="wiki-card-container">
  <h3>Ficha de Propiedades</h3>
  <div class="wiki-card-content" id="wiki-card-content">
    <p>Cargando...</p>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const scriptTag = document.getElementById("user-note-frontmatter");
  if (!scriptTag) return;

  let frontmatter = {};
  try {
    frontmatter = JSON.parse(scriptTag.textContent.trim());
  } catch (e) {
    console.error("Error parseando frontmatter:", e);
  }

  const contentEl = document.getElementById("wiki-card-content");
  contentEl.innerHTML = ""; // limpiar

  // Opcional: claves a ignorar (las internas de Digital Garden)
  const ignoreKeys = ["dg-publish", "dg-permalink", "cssclasses", "dg-pinned", "tags"];

  for (const [key, value] of Object.entries(frontmatter)) {
    if (ignoreKeys.includes(key)) continue;

    let displayValue = "";

    if (Array.isArray(value)) {
      // lista
      displayValue = value.join(", ");
    } else if (typeof value === "object" && value !== null) {
      // objeto (muy raro en frontmatter)
      displayValue = JSON.stringify(value);
    } else {
      displayValue = value ?? "N/A";
    }

    contentEl.innerHTML += `
      <p><strong>${key}:</strong> ${displayValue}</p>
    `;
  }
});
</script>

<style>
.wiki-card-container {
  display: flex;
  flex-direction: column;
  background: #fdf6e3;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  max-width: 400px;
  font-family: sans-serif;
}
.wiki-card-content p {
  margin: 0.3rem 0;
}
</style>
